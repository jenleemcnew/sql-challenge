--Drop table if exists
drop table if exists titles;
drop table if exists departments;
drop table if exists dept_emp;
drop table if exists dept_manager;
drop table if exists employees;
drop table if exists salaries;

-- Creating departments table
CREATE TABLE departments (
    dept_no CHAR(4) PRIMARY KEY,
    dept_name VARCHAR(40) UNIQUE NOT NULL
);

-- Creating employees table
CREATE TABLE employees (
    emp_no INT PRIMARY KEY,
    employee_title_id VARCHAR(10) NOT NULL,
    birth_date DATE NOT NULL,
    first_name VARCHAR(14) NOT NULL,
    last_name VARCHAR(16) NOT NULL,
    sex CHAR(1) NOT NULL,
    hire_date DATE NOT NULL
);

-- Creating dept_emp table with foreign keys to employees and departments
CREATE TABLE dept_emp (
    emp_no INT,
    dept_no CHAR(4),
    PRIMARY KEY (emp_no, dept_no),
    FOREIGN KEY (emp_no) REFERENCES employees (emp_no),
    FOREIGN KEY (dept_no) REFERENCES departments (dept_no)
);

-- Creating dept_manager table with foreign keys to employees and departments
CREATE TABLE dept_manager (
    dept_no CHAR(4),    
    emp_no INT,
    PRIMARY KEY (emp_no, dept_no),
    FOREIGN KEY (emp_no) REFERENCES employees (emp_no),
    FOREIGN KEY (dept_no) REFERENCES departments (dept_no)
);

-- Creating salaries table with a foreign key to employees
CREATE TABLE salaries (
    emp_no INT,
    salary INT NOT NULL,
    PRIMARY KEY (emp_no),
    FOREIGN KEY (emp_no) REFERENCES employees (emp_no)
);

-- Creating titles table with a proper foreign key to employees
CREATE TABLE titles (
    title_id INT PRIMARY KEY,
    title VARCHAR(50) NOT NULL,
    emp_no INT,
    FOREIGN KEY (emp_no) REFERENCES employees (emp_no)
);

-- checking to see if imports worked
select *
from departments d;

select *
from titles t;

select *
from employees e;

select *
from dept_emp de;

select *
from dept_manager dm;

select *
from salaries s;